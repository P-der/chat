{"id":"src\\main.js","dependencies":[{"name":"C:\\Users\\pde\\package.json","includedInParent":true,"mtime":1515040467944},{"name":"./css/main.css","loc":{"line":1,"column":7},"parent":"C:\\Users\\pde\\Desktop\\chat\\web\\src\\main.js","resolved":"C:\\Users\\pde\\Desktop\\chat\\web\\src\\css\\main.css"},{"name":"./js/socket.io","loc":{"line":2,"column":15},"parent":"C:\\Users\\pde\\Desktop\\chat\\web\\src\\main.js","resolved":"C:\\Users\\pde\\Desktop\\chat\\web\\src\\js\\socket.io.js"}],"generated":{"js":"'use strict';\n\nrequire('./css/main.css');\n\nvar _socket = require('./js/socket.io');\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar loginStatus = false;\nvar oLogin = document.getElementById('login-box');\nvar oLoginInput = document.getElementById('login-input');\nvar oLoginBtn = document.getElementById('login-btn');\nvar nickName = '';\nvar oMessageInput = document.getElementById('message-input');\nvar oMessageBtn = document.getElementById('message-btn');\nvar oListBox = document.getElementById('list-box');\nvar oUsersLength = document.getElementById('users-length');\nvar oUserBox = document.getElementById('user-box');\nvar socket = (0, _socket2.default)('ws://localhost:3000');\n\n//连接服务器\nsocket.on('connect', function () {\n    console.log('ok');\n});\n\n//服务器事件\nsocket.on('login', function (data) {\n    if (data.status == 'ok') {\n        loginStatus = true;\n        oLogin.style.display = 'none';\n    } else {\n        alert(data.text);\n    }\n});\n\nsocket.on('message', function (data) {\n    oListBox.innerHTML += '<li>\\n        <div class=\"name\">' + data.name + '</div>\\n        <div class=\"message\">' + data.text + '</div>\\n    </li>';\n    oListBox.scrollTop = oListBox.scrollHeight;\n});\n\nsocket.on('sys', function (data) {\n    oUsersLength.innerText = data.count;\n    oListBox.innerHTML += '<li class=\"sys\">\\n        <div class=\"name\">\\u7CFB\\u7EDF\\u901A\\u77E5</div>\\n        <div class=\"message\">' + data.text + '</div>\\n    </li>';\n    var oUser = '';\n    data.users.forEach(function (el) {\n        oUser += '<li>' + el + '</li>';\n    });\n    oUserBox.innerHTML = oUser;\n});\n\n//登录事件\nfunction userLogin() {\n    console.log('login');\n    var loginName = oLoginInput.value;\n    if (loginName === '') {\n        alert('请输入用户名');\n    } else if (loginName.length > 20) {\n        alert('用户名不能超过20个字符长度');\n    } else {\n        nickName = loginName;\n        socket.emit('login', {\n            name: nickName\n        });\n    }\n}\noLoginBtn.addEventListener('click', userLogin);\noLoginInput.addEventListener('keydown', function (e) {\n    if (e.key === 'Enter') {\n        userLogin();\n    }\n});\n\n//发送消息\nfunction sendMessage() {\n    var oText = oMessageInput.value;\n    if (oText === '') {\n        alert('发送消息不能为空');\n        return;\n    } else if (oText.length > 30) {\n        alert('内容不能超过30字符长度');\n        return;\n    }\n    socket.emit('message', {\n        name: nickName,\n        text: oText\n    });\n    oListBox.innerHTML += '<li class=\"my\">\\n        <div class=\"name\">' + nickName + '</div>\\n        <div class=\"message\">' + oText + '</div>\\n    </li>';\n    oMessageInput.value = '';\n    oListBox.scrollTop = oListBox.scrollHeight;\n}\noMessageBtn.addEventListener('click', sendMessage);\noMessageInput.addEventListener('keydown', function (e) {\n    if (e.key === 'Enter') {\n        sendMessage();\n    }\n});","map":{"mappings":[{"generated":{"line":3,"column":0},"source":"src\\main.js","original":{"line":1,"column":0}},{"generated":{"line":5,"column":0},"source":"src\\main.js","original":{"line":2,"column":0}},{"generated":{"line":11,"column":0},"source":"src\\main.js","original":{"line":4,"column":0}},{"name":"loginStatus","generated":{"line":11,"column":4},"source":"src\\main.js","original":{"line":4,"column":4}},{"generated":{"line":11,"column":18},"source":"src\\main.js","original":{"line":4,"column":18}},{"generated":{"line":11,"column":23},"source":"src\\main.js","original":{"line":4,"column":0}},{"generated":{"line":12,"column":0},"source":"src\\main.js","original":{"line":5,"column":0}},{"name":"oLogin","generated":{"line":12,"column":4},"source":"src\\main.js","original":{"line":5,"column":4}},{"name":"document","generated":{"line":12,"column":13},"source":"src\\main.js","original":{"line":5,"column":13}},{"name":"getElementById","generated":{"line":12,"column":22},"source":"src\\main.js","original":{"line":5,"column":22}},{"generated":{"line":12,"column":36},"source":"src\\main.js","original":{"line":5,"column":13}},{"generated":{"line":12,"column":37},"source":"src\\main.js","original":{"line":5,"column":37}},{"generated":{"line":12,"column":48},"source":"src\\main.js","original":{"line":5,"column":13}},{"generated":{"line":12,"column":49},"source":"src\\main.js","original":{"line":5,"column":0}},{"generated":{"line":13,"column":0},"source":"src\\main.js","original":{"line":6,"column":0}},{"name":"oLoginInput","generated":{"line":13,"column":4},"source":"src\\main.js","original":{"line":6,"column":4}},{"name":"document","generated":{"line":13,"column":18},"source":"src\\main.js","original":{"line":6,"column":18}},{"name":"getElementById","generated":{"line":13,"column":27},"source":"src\\main.js","original":{"line":6,"column":27}},{"generated":{"line":13,"column":41},"source":"src\\main.js","original":{"line":6,"column":18}},{"generated":{"line":13,"column":42},"source":"src\\main.js","original":{"line":6,"column":42}},{"generated":{"line":13,"column":55},"source":"src\\main.js","original":{"line":6,"column":18}},{"generated":{"line":13,"column":56},"source":"src\\main.js","original":{"line":6,"column":0}},{"generated":{"line":14,"column":0},"source":"src\\main.js","original":{"line":7,"column":0}},{"name":"oLoginBtn","generated":{"line":14,"column":4},"source":"src\\main.js","original":{"line":7,"column":4}},{"name":"document","generated":{"line":14,"column":16},"source":"src\\main.js","original":{"line":7,"column":16}},{"name":"getElementById","generated":{"line":14,"column":25},"source":"src\\main.js","original":{"line":7,"column":25}},{"generated":{"line":14,"column":39},"source":"src\\main.js","original":{"line":7,"column":16}},{"generated":{"line":14,"column":40},"source":"src\\main.js","original":{"line":7,"column":40}},{"generated":{"line":14,"column":51},"source":"src\\main.js","original":{"line":7,"column":16}},{"generated":{"line":14,"column":52},"source":"src\\main.js","original":{"line":7,"column":0}},{"generated":{"line":15,"column":0},"source":"src\\main.js","original":{"line":8,"column":0}},{"name":"nickName","generated":{"line":15,"column":4},"source":"src\\main.js","original":{"line":8,"column":4}},{"generated":{"line":15,"column":15},"source":"src\\main.js","original":{"line":8,"column":15}},{"generated":{"line":15,"column":17},"source":"src\\main.js","original":{"line":8,"column":0}},{"generated":{"line":16,"column":0},"source":"src\\main.js","original":{"line":9,"column":0}},{"name":"oMessageInput","generated":{"line":16,"column":4},"source":"src\\main.js","original":{"line":9,"column":4}},{"name":"document","generated":{"line":16,"column":20},"source":"src\\main.js","original":{"line":9,"column":20}},{"name":"getElementById","generated":{"line":16,"column":29},"source":"src\\main.js","original":{"line":9,"column":29}},{"generated":{"line":16,"column":43},"source":"src\\main.js","original":{"line":9,"column":20}},{"generated":{"line":16,"column":44},"source":"src\\main.js","original":{"line":9,"column":44}},{"generated":{"line":16,"column":59},"source":"src\\main.js","original":{"line":9,"column":20}},{"generated":{"line":16,"column":60},"source":"src\\main.js","original":{"line":9,"column":0}},{"generated":{"line":17,"column":0},"source":"src\\main.js","original":{"line":10,"column":0}},{"name":"oMessageBtn","generated":{"line":17,"column":4},"source":"src\\main.js","original":{"line":10,"column":4}},{"name":"document","generated":{"line":17,"column":18},"source":"src\\main.js","original":{"line":10,"column":18}},{"name":"getElementById","generated":{"line":17,"column":27},"source":"src\\main.js","original":{"line":10,"column":27}},{"generated":{"line":17,"column":41},"source":"src\\main.js","original":{"line":10,"column":18}},{"generated":{"line":17,"column":42},"source":"src\\main.js","original":{"line":10,"column":42}},{"generated":{"line":17,"column":55},"source":"src\\main.js","original":{"line":10,"column":18}},{"generated":{"line":17,"column":56},"source":"src\\main.js","original":{"line":10,"column":0}},{"generated":{"line":18,"column":0},"source":"src\\main.js","original":{"line":11,"column":0}},{"name":"oListBox","generated":{"line":18,"column":4},"source":"src\\main.js","original":{"line":11,"column":4}},{"name":"document","generated":{"line":18,"column":15},"source":"src\\main.js","original":{"line":11,"column":15}},{"name":"getElementById","generated":{"line":18,"column":24},"source":"src\\main.js","original":{"line":11,"column":24}},{"generated":{"line":18,"column":38},"source":"src\\main.js","original":{"line":11,"column":15}},{"generated":{"line":18,"column":39},"source":"src\\main.js","original":{"line":11,"column":39}},{"generated":{"line":18,"column":49},"source":"src\\main.js","original":{"line":11,"column":15}},{"generated":{"line":18,"column":50},"source":"src\\main.js","original":{"line":11,"column":0}},{"generated":{"line":19,"column":0},"source":"src\\main.js","original":{"line":12,"column":0}},{"name":"oUsersLength","generated":{"line":19,"column":4},"source":"src\\main.js","original":{"line":12,"column":4}},{"name":"document","generated":{"line":19,"column":19},"source":"src\\main.js","original":{"line":12,"column":19}},{"name":"getElementById","generated":{"line":19,"column":28},"source":"src\\main.js","original":{"line":12,"column":28}},{"generated":{"line":19,"column":42},"source":"src\\main.js","original":{"line":12,"column":19}},{"generated":{"line":19,"column":43},"source":"src\\main.js","original":{"line":12,"column":43}},{"generated":{"line":19,"column":57},"source":"src\\main.js","original":{"line":12,"column":19}},{"generated":{"line":19,"column":58},"source":"src\\main.js","original":{"line":12,"column":0}},{"generated":{"line":20,"column":0},"source":"src\\main.js","original":{"line":13,"column":0}},{"name":"oUserBox","generated":{"line":20,"column":4},"source":"src\\main.js","original":{"line":13,"column":4}},{"name":"document","generated":{"line":20,"column":15},"source":"src\\main.js","original":{"line":13,"column":15}},{"name":"getElementById","generated":{"line":20,"column":24},"source":"src\\main.js","original":{"line":13,"column":24}},{"generated":{"line":20,"column":38},"source":"src\\main.js","original":{"line":13,"column":15}},{"generated":{"line":20,"column":39},"source":"src\\main.js","original":{"line":13,"column":39}},{"generated":{"line":20,"column":49},"source":"src\\main.js","original":{"line":13,"column":15}},{"generated":{"line":20,"column":50},"source":"src\\main.js","original":{"line":13,"column":0}},{"generated":{"line":21,"column":0},"source":"src\\main.js","original":{"line":14,"column":0}},{"name":"socket","generated":{"line":21,"column":4},"source":"src\\main.js","original":{"line":14,"column":4}},{"generated":{"line":21,"column":13},"source":"src\\main.js","original":{"line":14,"column":13}},{"generated":{"line":21,"column":35},"source":"src\\main.js","original":{"line":14,"column":16}},{"generated":{"line":21,"column":56},"source":"src\\main.js","original":{"line":14,"column":13}},{"generated":{"line":21,"column":57},"source":"src\\main.js","original":{"line":14,"column":0}},{"generated":{"line":23,"column":0},"source":"src\\main.js","original":{"line":16,"column":0}},{"name":"socket","generated":{"line":24,"column":0},"source":"src\\main.js","original":{"line":17,"column":0}},{"name":"on","generated":{"line":24,"column":7},"source":"src\\main.js","original":{"line":17,"column":7}},{"generated":{"line":24,"column":9},"source":"src\\main.js","original":{"line":17,"column":0}},{"generated":{"line":24,"column":10},"source":"src\\main.js","original":{"line":17,"column":10}},{"generated":{"line":24,"column":19},"source":"src\\main.js","original":{"line":17,"column":0}},{"generated":{"line":24,"column":21},"source":"src\\main.js","original":{"line":17,"column":20}},{"generated":{"line":24,"column":33},"source":"src\\main.js","original":{"line":17,"column":30}},{"name":"console","generated":{"line":25,"column":0},"source":"src\\main.js","original":{"line":18,"column":4}},{"name":"log","generated":{"line":25,"column":12},"source":"src\\main.js","original":{"line":18,"column":12}},{"generated":{"line":25,"column":15},"source":"src\\main.js","original":{"line":18,"column":4}},{"generated":{"line":25,"column":16},"source":"src\\main.js","original":{"line":18,"column":16}},{"generated":{"line":25,"column":20},"source":"src\\main.js","original":{"line":18,"column":4}},{"generated":{"line":26,"column":0},"source":"src\\main.js","original":{"line":19,"column":1}},{"generated":{"line":26,"column":1},"source":"src\\main.js","original":{"line":17,"column":0}},{"generated":{"line":28,"column":0},"source":"src\\main.js","original":{"line":21,"column":0}},{"name":"socket","generated":{"line":29,"column":0},"source":"src\\main.js","original":{"line":22,"column":0}},{"name":"on","generated":{"line":29,"column":7},"source":"src\\main.js","original":{"line":22,"column":7}},{"generated":{"line":29,"column":9},"source":"src\\main.js","original":{"line":22,"column":0}},{"generated":{"line":29,"column":10},"source":"src\\main.js","original":{"line":22,"column":10}},{"generated":{"line":29,"column":17},"source":"src\\main.js","original":{"line":22,"column":0}},{"generated":{"line":29,"column":19},"source":"src\\main.js","original":{"line":22,"column":18}},{"name":"data","generated":{"line":29,"column":29},"source":"src\\main.js","original":{"line":22,"column":27}},{"generated":{"line":29,"column":33},"source":"src\\main.js","original":{"line":22,"column":18}},{"generated":{"line":29,"column":35},"source":"src\\main.js","original":{"line":22,"column":32}},{"generated":{"line":30,"column":0},"source":"src\\main.js","original":{"line":23,"column":4}},{"name":"data","generated":{"line":30,"column":8},"source":"src\\main.js","original":{"line":23,"column":7}},{"name":"status","generated":{"line":30,"column":13},"source":"src\\main.js","original":{"line":23,"column":12}},{"generated":{"line":30,"column":19},"source":"src\\main.js","original":{"line":23,"column":7}},{"generated":{"line":30,"column":23},"source":"src\\main.js","original":{"line":23,"column":20}},{"generated":{"line":30,"column":27},"source":"src\\main.js","original":{"line":23,"column":4}},{"generated":{"line":30,"column":29},"source":"src\\main.js","original":{"line":23,"column":25}},{"name":"loginStatus","generated":{"line":31,"column":0},"source":"src\\main.js","original":{"line":24,"column":8}},{"generated":{"line":31,"column":22},"source":"src\\main.js","original":{"line":24,"column":22}},{"generated":{"line":31,"column":26},"source":"src\\main.js","original":{"line":24,"column":8}},{"name":"oLogin","generated":{"line":32,"column":0},"source":"src\\main.js","original":{"line":25,"column":8}},{"name":"style","generated":{"line":32,"column":15},"source":"src\\main.js","original":{"line":25,"column":15}},{"generated":{"line":32,"column":20},"source":"src\\main.js","original":{"line":25,"column":8}},{"name":"display","generated":{"line":32,"column":21},"source":"src\\main.js","original":{"line":25,"column":21}},{"generated":{"line":32,"column":28},"source":"src\\main.js","original":{"line":25,"column":8}},{"generated":{"line":32,"column":31},"source":"src\\main.js","original":{"line":25,"column":31}},{"generated":{"line":32,"column":37},"source":"src\\main.js","original":{"line":25,"column":8}},{"generated":{"line":33,"column":0},"source":"src\\main.js","original":{"line":26,"column":5}},{"generated":{"line":33,"column":5},"source":"src\\main.js","original":{"line":23,"column":4}},{"generated":{"line":33,"column":11},"source":"src\\main.js","original":{"line":26,"column":9}},{"name":"alert","generated":{"line":34,"column":0},"source":"src\\main.js","original":{"line":27,"column":8}},{"name":"data","generated":{"line":34,"column":14},"source":"src\\main.js","original":{"line":27,"column":14}},{"name":"text","generated":{"line":34,"column":19},"source":"src\\main.js","original":{"line":27,"column":19}},{"generated":{"line":34,"column":23},"source":"src\\main.js","original":{"line":27,"column":8}},{"generated":{"line":35,"column":0},"source":"src\\main.js","original":{"line":28,"column":5}},{"generated":{"line":36,"column":0},"source":"src\\main.js","original":{"line":29,"column":1}},{"generated":{"line":36,"column":1},"source":"src\\main.js","original":{"line":22,"column":0}},{"name":"socket","generated":{"line":38,"column":0},"source":"src\\main.js","original":{"line":31,"column":0}},{"name":"on","generated":{"line":38,"column":7},"source":"src\\main.js","original":{"line":31,"column":7}},{"generated":{"line":38,"column":9},"source":"src\\main.js","original":{"line":31,"column":0}},{"generated":{"line":38,"column":10},"source":"src\\main.js","original":{"line":31,"column":10}},{"generated":{"line":38,"column":19},"source":"src\\main.js","original":{"line":31,"column":0}},{"generated":{"line":38,"column":21},"source":"src\\main.js","original":{"line":31,"column":20}},{"name":"data","generated":{"line":38,"column":31},"source":"src\\main.js","original":{"line":31,"column":29}},{"generated":{"line":38,"column":35},"source":"src\\main.js","original":{"line":31,"column":20}},{"generated":{"line":38,"column":37},"source":"src\\main.js","original":{"line":31,"column":34}},{"name":"oListBox","generated":{"line":39,"column":0},"source":"src\\main.js","original":{"line":32,"column":4}},{"name":"innerHTML","generated":{"line":39,"column":13},"source":"src\\main.js","original":{"line":32,"column":13}},{"generated":{"line":39,"column":22},"source":"src\\main.js","original":{"line":32,"column":4}},{"name":"data","generated":{"line":39,"column":63},"source":"src\\main.js","original":{"line":33,"column":28}},{"name":"name","generated":{"line":39,"column":68},"source":"src\\main.js","original":{"line":33,"column":33}},{"generated":{"line":39,"column":72},"source":"src\\main.js","original":{"line":32,"column":4}},{"name":"data","generated":{"line":39,"column":117},"source":"src\\main.js","original":{"line":34,"column":31}},{"name":"text","generated":{"line":39,"column":122},"source":"src\\main.js","original":{"line":34,"column":36}},{"generated":{"line":39,"column":126},"source":"src\\main.js","original":{"line":32,"column":4}},{"name":"oListBox","generated":{"line":40,"column":0},"source":"src\\main.js","original":{"line":36,"column":4}},{"name":"scrollTop","generated":{"line":40,"column":13},"source":"src\\main.js","original":{"line":36,"column":13}},{"generated":{"line":40,"column":22},"source":"src\\main.js","original":{"line":36,"column":4}},{"name":"oListBox","generated":{"line":40,"column":25},"source":"src\\main.js","original":{"line":36,"column":25}},{"name":"scrollHeight","generated":{"line":40,"column":34},"source":"src\\main.js","original":{"line":36,"column":34}},{"generated":{"line":40,"column":46},"source":"src\\main.js","original":{"line":36,"column":4}},{"generated":{"line":41,"column":0},"source":"src\\main.js","original":{"line":37,"column":1}},{"generated":{"line":41,"column":1},"source":"src\\main.js","original":{"line":31,"column":0}},{"name":"socket","generated":{"line":43,"column":0},"source":"src\\main.js","original":{"line":39,"column":0}},{"name":"on","generated":{"line":43,"column":7},"source":"src\\main.js","original":{"line":39,"column":7}},{"generated":{"line":43,"column":9},"source":"src\\main.js","original":{"line":39,"column":0}},{"generated":{"line":43,"column":10},"source":"src\\main.js","original":{"line":39,"column":10}},{"generated":{"line":43,"column":15},"source":"src\\main.js","original":{"line":39,"column":0}},{"generated":{"line":43,"column":17},"source":"src\\main.js","original":{"line":39,"column":16}},{"name":"data","generated":{"line":43,"column":27},"source":"src\\main.js","original":{"line":39,"column":25}},{"generated":{"line":43,"column":31},"source":"src\\main.js","original":{"line":39,"column":16}},{"generated":{"line":43,"column":33},"source":"src\\main.js","original":{"line":39,"column":30}},{"name":"oUsersLength","generated":{"line":44,"column":0},"source":"src\\main.js","original":{"line":40,"column":4}},{"name":"innerText","generated":{"line":44,"column":17},"source":"src\\main.js","original":{"line":40,"column":17}},{"generated":{"line":44,"column":26},"source":"src\\main.js","original":{"line":40,"column":4}},{"name":"data","generated":{"line":44,"column":29},"source":"src\\main.js","original":{"line":40,"column":29}},{"name":"count","generated":{"line":44,"column":34},"source":"src\\main.js","original":{"line":40,"column":34}},{"generated":{"line":44,"column":39},"source":"src\\main.js","original":{"line":40,"column":4}},{"name":"oListBox","generated":{"line":45,"column":0},"source":"src\\main.js","original":{"line":41,"column":4}},{"name":"innerHTML","generated":{"line":45,"column":13},"source":"src\\main.js","original":{"line":41,"column":13}},{"generated":{"line":45,"column":22},"source":"src\\main.js","original":{"line":41,"column":4}},{"name":"data","generated":{"line":45,"column":136},"source":"src\\main.js","original":{"line":43,"column":31}},{"name":"text","generated":{"line":45,"column":141},"source":"src\\main.js","original":{"line":43,"column":36}},{"generated":{"line":45,"column":145},"source":"src\\main.js","original":{"line":41,"column":4}},{"generated":{"line":46,"column":0},"source":"src\\main.js","original":{"line":45,"column":4}},{"name":"oUser","generated":{"line":46,"column":8},"source":"src\\main.js","original":{"line":45,"column":8}},{"generated":{"line":46,"column":16},"source":"src\\main.js","original":{"line":45,"column":16}},{"generated":{"line":46,"column":18},"source":"src\\main.js","original":{"line":45,"column":4}},{"name":"data","generated":{"line":47,"column":0},"source":"src\\main.js","original":{"line":46,"column":4}},{"name":"users","generated":{"line":47,"column":9},"source":"src\\main.js","original":{"line":46,"column":9}},{"generated":{"line":47,"column":14},"source":"src\\main.js","original":{"line":46,"column":4}},{"name":"forEach","generated":{"line":47,"column":15},"source":"src\\main.js","original":{"line":46,"column":15}},{"generated":{"line":47,"column":22},"source":"src\\main.js","original":{"line":46,"column":4}},{"generated":{"line":47,"column":23},"source":"src\\main.js","original":{"line":46,"column":23}},{"generated":{"line":47,"column":37},"source":"src\\main.js","original":{"line":46,"column":29}},{"name":"oUser","generated":{"line":48,"column":0},"source":"src\\main.js","original":{"line":47,"column":8}},{"name":"el","generated":{"line":48,"column":26},"source":"src\\main.js","original":{"line":47,"column":24}},{"generated":{"line":48,"column":28},"source":"src\\main.js","original":{"line":47,"column":8}},{"generated":{"line":49,"column":0},"source":"src\\main.js","original":{"line":48,"column":5}},{"generated":{"line":49,"column":5},"source":"src\\main.js","original":{"line":46,"column":4}},{"name":"oUserBox","generated":{"line":50,"column":0},"source":"src\\main.js","original":{"line":49,"column":4}},{"name":"innerHTML","generated":{"line":50,"column":13},"source":"src\\main.js","original":{"line":49,"column":13}},{"generated":{"line":50,"column":22},"source":"src\\main.js","original":{"line":49,"column":4}},{"name":"oUser","generated":{"line":50,"column":25},"source":"src\\main.js","original":{"line":49,"column":25}},{"generated":{"line":50,"column":30},"source":"src\\main.js","original":{"line":49,"column":4}},{"generated":{"line":51,"column":0},"source":"src\\main.js","original":{"line":50,"column":1}},{"generated":{"line":51,"column":1},"source":"src\\main.js","original":{"line":39,"column":0}},{"generated":{"line":53,"column":0},"source":"src\\main.js","original":{"line":52,"column":0}},{"generated":{"line":54,"column":0},"source":"src\\main.js","original":{"line":53,"column":0}},{"name":"userLogin","generated":{"line":54,"column":9},"source":"src\\main.js","original":{"line":53,"column":9}},{"generated":{"line":54,"column":18},"source":"src\\main.js","original":{"line":53,"column":0}},{"generated":{"line":54,"column":21},"source":"src\\main.js","original":{"line":53,"column":20}},{"name":"console","generated":{"line":55,"column":0},"source":"src\\main.js","original":{"line":54,"column":4}},{"name":"log","generated":{"line":55,"column":12},"source":"src\\main.js","original":{"line":54,"column":12}},{"generated":{"line":55,"column":15},"source":"src\\main.js","original":{"line":54,"column":4}},{"generated":{"line":55,"column":16},"source":"src\\main.js","original":{"line":54,"column":16}},{"generated":{"line":55,"column":23},"source":"src\\main.js","original":{"line":54,"column":4}},{"generated":{"line":56,"column":0},"source":"src\\main.js","original":{"line":55,"column":4}},{"name":"loginName","generated":{"line":56,"column":8},"source":"src\\main.js","original":{"line":55,"column":8}},{"name":"oLoginInput","generated":{"line":56,"column":20},"source":"src\\main.js","original":{"line":55,"column":20}},{"name":"value","generated":{"line":56,"column":32},"source":"src\\main.js","original":{"line":55,"column":32}},{"generated":{"line":56,"column":37},"source":"src\\main.js","original":{"line":55,"column":4}},{"generated":{"line":57,"column":0},"source":"src\\main.js","original":{"line":56,"column":4}},{"name":"loginName","generated":{"line":57,"column":8},"source":"src\\main.js","original":{"line":56,"column":7}},{"generated":{"line":57,"column":22},"source":"src\\main.js","original":{"line":56,"column":21}},{"generated":{"line":57,"column":24},"source":"src\\main.js","original":{"line":56,"column":4}},{"generated":{"line":57,"column":26},"source":"src\\main.js","original":{"line":56,"column":24}},{"name":"alert","generated":{"line":58,"column":0},"source":"src\\main.js","original":{"line":57,"column":8}},{"generated":{"line":58,"column":14},"source":"src\\main.js","original":{"line":57,"column":14}},{"generated":{"line":58,"column":22},"source":"src\\main.js","original":{"line":57,"column":8}},{"generated":{"line":59,"column":0},"source":"src\\main.js","original":{"line":58,"column":5}},{"generated":{"line":59,"column":5},"source":"src\\main.js","original":{"line":56,"column":4}},{"generated":{"line":59,"column":11},"source":"src\\main.js","original":{"line":58,"column":10}},{"name":"loginName","generated":{"line":59,"column":15},"source":"src\\main.js","original":{"line":58,"column":13}},{"name":"length","generated":{"line":59,"column":25},"source":"src\\main.js","original":{"line":58,"column":23}},{"generated":{"line":59,"column":31},"source":"src\\main.js","original":{"line":58,"column":13}},{"generated":{"line":59,"column":34},"source":"src\\main.js","original":{"line":58,"column":30}},{"generated":{"line":59,"column":36},"source":"src\\main.js","original":{"line":58,"column":10}},{"generated":{"line":59,"column":38},"source":"src\\main.js","original":{"line":58,"column":33}},{"name":"alert","generated":{"line":60,"column":0},"source":"src\\main.js","original":{"line":59,"column":8}},{"generated":{"line":60,"column":14},"source":"src\\main.js","original":{"line":59,"column":14}},{"generated":{"line":60,"column":30},"source":"src\\main.js","original":{"line":59,"column":8}},{"generated":{"line":61,"column":0},"source":"src\\main.js","original":{"line":60,"column":5}},{"generated":{"line":61,"column":5},"source":"src\\main.js","original":{"line":58,"column":10}},{"generated":{"line":61,"column":11},"source":"src\\main.js","original":{"line":60,"column":9}},{"name":"nickName","generated":{"line":62,"column":0},"source":"src\\main.js","original":{"line":61,"column":8}},{"name":"loginName","generated":{"line":62,"column":19},"source":"src\\main.js","original":{"line":61,"column":19}},{"generated":{"line":62,"column":28},"source":"src\\main.js","original":{"line":61,"column":8}},{"name":"socket","generated":{"line":63,"column":0},"source":"src\\main.js","original":{"line":62,"column":8}},{"name":"emit","generated":{"line":63,"column":15},"source":"src\\main.js","original":{"line":62,"column":15}},{"generated":{"line":63,"column":19},"source":"src\\main.js","original":{"line":62,"column":8}},{"generated":{"line":63,"column":20},"source":"src\\main.js","original":{"line":62,"column":20}},{"generated":{"line":63,"column":27},"source":"src\\main.js","original":{"line":62,"column":8}},{"generated":{"line":63,"column":29},"source":"src\\main.js","original":{"line":62,"column":28}},{"name":"name","generated":{"line":64,"column":0},"source":"src\\main.js","original":{"line":63,"column":12}},{"name":"nickName","generated":{"line":64,"column":18},"source":"src\\main.js","original":{"line":63,"column":17}},{"generated":{"line":65,"column":0},"source":"src\\main.js","original":{"line":62,"column":28}},{"generated":{"line":65,"column":9},"source":"src\\main.js","original":{"line":62,"column":8}},{"generated":{"line":66,"column":0},"source":"src\\main.js","original":{"line":65,"column":5}},{"generated":{"line":67,"column":0},"source":"src\\main.js","original":{"line":66,"column":1}},{"name":"oLoginBtn","generated":{"line":68,"column":0},"source":"src\\main.js","original":{"line":67,"column":0}},{"name":"addEventListener","generated":{"line":68,"column":10},"source":"src\\main.js","original":{"line":67,"column":10}},{"generated":{"line":68,"column":26},"source":"src\\main.js","original":{"line":67,"column":0}},{"generated":{"line":68,"column":27},"source":"src\\main.js","original":{"line":67,"column":27}},{"generated":{"line":68,"column":34},"source":"src\\main.js","original":{"line":67,"column":0}},{"name":"userLogin","generated":{"line":68,"column":36},"source":"src\\main.js","original":{"line":67,"column":35}},{"generated":{"line":68,"column":45},"source":"src\\main.js","original":{"line":67,"column":0}},{"name":"oLoginInput","generated":{"line":69,"column":0},"source":"src\\main.js","original":{"line":68,"column":0}},{"name":"addEventListener","generated":{"line":69,"column":12},"source":"src\\main.js","original":{"line":68,"column":12}},{"generated":{"line":69,"column":28},"source":"src\\main.js","original":{"line":68,"column":0}},{"generated":{"line":69,"column":29},"source":"src\\main.js","original":{"line":68,"column":29}},{"generated":{"line":69,"column":38},"source":"src\\main.js","original":{"line":68,"column":0}},{"generated":{"line":69,"column":40},"source":"src\\main.js","original":{"line":68,"column":39}},{"name":"e","generated":{"line":69,"column":50},"source":"src\\main.js","original":{"line":68,"column":48}},{"generated":{"line":69,"column":51},"source":"src\\main.js","original":{"line":68,"column":39}},{"generated":{"line":69,"column":53},"source":"src\\main.js","original":{"line":68,"column":50}},{"generated":{"line":70,"column":0},"source":"src\\main.js","original":{"line":69,"column":4}},{"name":"e","generated":{"line":70,"column":8},"source":"src\\main.js","original":{"line":69,"column":7}},{"name":"key","generated":{"line":70,"column":10},"source":"src\\main.js","original":{"line":69,"column":9}},{"generated":{"line":70,"column":13},"source":"src\\main.js","original":{"line":69,"column":7}},{"generated":{"line":70,"column":18},"source":"src\\main.js","original":{"line":69,"column":17}},{"generated":{"line":70,"column":25},"source":"src\\main.js","original":{"line":69,"column":4}},{"generated":{"line":70,"column":27},"source":"src\\main.js","original":{"line":69,"column":25}},{"name":"userLogin","generated":{"line":71,"column":0},"source":"src\\main.js","original":{"line":70,"column":8}},{"generated":{"line":72,"column":0},"source":"src\\main.js","original":{"line":71,"column":5}},{"generated":{"line":73,"column":0},"source":"src\\main.js","original":{"line":72,"column":1}},{"generated":{"line":73,"column":1},"source":"src\\main.js","original":{"line":68,"column":0}},{"generated":{"line":75,"column":0},"source":"src\\main.js","original":{"line":74,"column":0}},{"generated":{"line":76,"column":0},"source":"src\\main.js","original":{"line":75,"column":0}},{"name":"sendMessage","generated":{"line":76,"column":9},"source":"src\\main.js","original":{"line":75,"column":9}},{"generated":{"line":76,"column":20},"source":"src\\main.js","original":{"line":75,"column":0}},{"generated":{"line":76,"column":23},"source":"src\\main.js","original":{"line":75,"column":22}},{"generated":{"line":77,"column":0},"source":"src\\main.js","original":{"line":76,"column":4}},{"name":"oText","generated":{"line":77,"column":8},"source":"src\\main.js","original":{"line":76,"column":8}},{"name":"oMessageInput","generated":{"line":77,"column":16},"source":"src\\main.js","original":{"line":76,"column":16}},{"name":"value","generated":{"line":77,"column":30},"source":"src\\main.js","original":{"line":76,"column":30}},{"generated":{"line":77,"column":35},"source":"src\\main.js","original":{"line":76,"column":4}},{"generated":{"line":78,"column":0},"source":"src\\main.js","original":{"line":77,"column":4}},{"name":"oText","generated":{"line":78,"column":8},"source":"src\\main.js","original":{"line":77,"column":7}},{"generated":{"line":78,"column":18},"source":"src\\main.js","original":{"line":77,"column":17}},{"generated":{"line":78,"column":20},"source":"src\\main.js","original":{"line":77,"column":4}},{"generated":{"line":78,"column":22},"source":"src\\main.js","original":{"line":77,"column":20}},{"name":"alert","generated":{"line":79,"column":0},"source":"src\\main.js","original":{"line":78,"column":8}},{"generated":{"line":79,"column":14},"source":"src\\main.js","original":{"line":78,"column":14}},{"generated":{"line":79,"column":24},"source":"src\\main.js","original":{"line":78,"column":8}},{"generated":{"line":80,"column":0},"source":"src\\main.js","original":{"line":79,"column":8}},{"generated":{"line":81,"column":0},"source":"src\\main.js","original":{"line":80,"column":5}},{"generated":{"line":81,"column":5},"source":"src\\main.js","original":{"line":77,"column":4}},{"generated":{"line":81,"column":11},"source":"src\\main.js","original":{"line":80,"column":10}},{"name":"oText","generated":{"line":81,"column":15},"source":"src\\main.js","original":{"line":80,"column":13}},{"name":"length","generated":{"line":81,"column":21},"source":"src\\main.js","original":{"line":80,"column":19}},{"generated":{"line":81,"column":27},"source":"src\\main.js","original":{"line":80,"column":13}},{"generated":{"line":81,"column":30},"source":"src\\main.js","original":{"line":80,"column":28}},{"generated":{"line":81,"column":32},"source":"src\\main.js","original":{"line":80,"column":10}},{"generated":{"line":81,"column":34},"source":"src\\main.js","original":{"line":80,"column":31}},{"name":"alert","generated":{"line":82,"column":0},"source":"src\\main.js","original":{"line":81,"column":8}},{"generated":{"line":82,"column":14},"source":"src\\main.js","original":{"line":81,"column":14}},{"generated":{"line":82,"column":28},"source":"src\\main.js","original":{"line":81,"column":8}},{"generated":{"line":83,"column":0},"source":"src\\main.js","original":{"line":82,"column":8}},{"generated":{"line":84,"column":0},"source":"src\\main.js","original":{"line":83,"column":5}},{"name":"socket","generated":{"line":85,"column":0},"source":"src\\main.js","original":{"line":84,"column":4}},{"name":"emit","generated":{"line":85,"column":11},"source":"src\\main.js","original":{"line":84,"column":11}},{"generated":{"line":85,"column":15},"source":"src\\main.js","original":{"line":84,"column":4}},{"generated":{"line":85,"column":16},"source":"src\\main.js","original":{"line":84,"column":16}},{"generated":{"line":85,"column":25},"source":"src\\main.js","original":{"line":84,"column":4}},{"generated":{"line":85,"column":27},"source":"src\\main.js","original":{"line":84,"column":26}},{"name":"name","generated":{"line":86,"column":0},"source":"src\\main.js","original":{"line":85,"column":8}},{"name":"nickName","generated":{"line":86,"column":14},"source":"src\\main.js","original":{"line":85,"column":13}},{"generated":{"line":86,"column":22},"source":"src\\main.js","original":{"line":84,"column":26}},{"name":"text","generated":{"line":87,"column":0},"source":"src\\main.js","original":{"line":86,"column":8}},{"name":"oText","generated":{"line":87,"column":14},"source":"src\\main.js","original":{"line":86,"column":13}},{"generated":{"line":88,"column":0},"source":"src\\main.js","original":{"line":84,"column":26}},{"generated":{"line":88,"column":5},"source":"src\\main.js","original":{"line":84,"column":4}},{"name":"oListBox","generated":{"line":89,"column":0},"source":"src\\main.js","original":{"line":88,"column":4}},{"name":"innerHTML","generated":{"line":89,"column":13},"source":"src\\main.js","original":{"line":88,"column":13}},{"generated":{"line":89,"column":22},"source":"src\\main.js","original":{"line":88,"column":4}},{"name":"nickName","generated":{"line":89,"column":74},"source":"src\\main.js","original":{"line":89,"column":28}},{"generated":{"line":89,"column":82},"source":"src\\main.js","original":{"line":88,"column":4}},{"name":"oText","generated":{"line":89,"column":127},"source":"src\\main.js","original":{"line":90,"column":31}},{"generated":{"line":89,"column":132},"source":"src\\main.js","original":{"line":88,"column":4}},{"name":"oMessageInput","generated":{"line":90,"column":0},"source":"src\\main.js","original":{"line":92,"column":4}},{"name":"value","generated":{"line":90,"column":18},"source":"src\\main.js","original":{"line":92,"column":18}},{"generated":{"line":90,"column":23},"source":"src\\main.js","original":{"line":92,"column":4}},{"generated":{"line":90,"column":26},"source":"src\\main.js","original":{"line":92,"column":26}},{"generated":{"line":90,"column":28},"source":"src\\main.js","original":{"line":92,"column":4}},{"name":"oListBox","generated":{"line":91,"column":0},"source":"src\\main.js","original":{"line":93,"column":4}},{"name":"scrollTop","generated":{"line":91,"column":13},"source":"src\\main.js","original":{"line":93,"column":13}},{"generated":{"line":91,"column":22},"source":"src\\main.js","original":{"line":93,"column":4}},{"name":"oListBox","generated":{"line":91,"column":25},"source":"src\\main.js","original":{"line":93,"column":25}},{"name":"scrollHeight","generated":{"line":91,"column":34},"source":"src\\main.js","original":{"line":93,"column":34}},{"generated":{"line":91,"column":46},"source":"src\\main.js","original":{"line":93,"column":4}},{"generated":{"line":92,"column":0},"source":"src\\main.js","original":{"line":94,"column":1}},{"name":"oMessageBtn","generated":{"line":93,"column":0},"source":"src\\main.js","original":{"line":95,"column":0}},{"name":"addEventListener","generated":{"line":93,"column":12},"source":"src\\main.js","original":{"line":95,"column":12}},{"generated":{"line":93,"column":28},"source":"src\\main.js","original":{"line":95,"column":0}},{"generated":{"line":93,"column":29},"source":"src\\main.js","original":{"line":95,"column":29}},{"generated":{"line":93,"column":36},"source":"src\\main.js","original":{"line":95,"column":0}},{"name":"sendMessage","generated":{"line":93,"column":38},"source":"src\\main.js","original":{"line":95,"column":37}},{"generated":{"line":93,"column":49},"source":"src\\main.js","original":{"line":95,"column":0}},{"name":"oMessageInput","generated":{"line":94,"column":0},"source":"src\\main.js","original":{"line":96,"column":0}},{"name":"addEventListener","generated":{"line":94,"column":14},"source":"src\\main.js","original":{"line":96,"column":14}},{"generated":{"line":94,"column":30},"source":"src\\main.js","original":{"line":96,"column":0}},{"generated":{"line":94,"column":31},"source":"src\\main.js","original":{"line":96,"column":31}},{"generated":{"line":94,"column":40},"source":"src\\main.js","original":{"line":96,"column":0}},{"generated":{"line":94,"column":42},"source":"src\\main.js","original":{"line":96,"column":41}},{"name":"e","generated":{"line":94,"column":52},"source":"src\\main.js","original":{"line":96,"column":50}},{"generated":{"line":94,"column":53},"source":"src\\main.js","original":{"line":96,"column":41}},{"generated":{"line":94,"column":55},"source":"src\\main.js","original":{"line":96,"column":52}},{"generated":{"line":95,"column":0},"source":"src\\main.js","original":{"line":97,"column":4}},{"name":"e","generated":{"line":95,"column":8},"source":"src\\main.js","original":{"line":97,"column":7}},{"name":"key","generated":{"line":95,"column":10},"source":"src\\main.js","original":{"line":97,"column":9}},{"generated":{"line":95,"column":13},"source":"src\\main.js","original":{"line":97,"column":7}},{"generated":{"line":95,"column":18},"source":"src\\main.js","original":{"line":97,"column":17}},{"generated":{"line":95,"column":25},"source":"src\\main.js","original":{"line":97,"column":4}},{"generated":{"line":95,"column":27},"source":"src\\main.js","original":{"line":97,"column":25}},{"name":"sendMessage","generated":{"line":96,"column":0},"source":"src\\main.js","original":{"line":98,"column":8}},{"generated":{"line":97,"column":0},"source":"src\\main.js","original":{"line":99,"column":5}},{"generated":{"line":98,"column":0},"source":"src\\main.js","original":{"line":100,"column":1}},{"generated":{"line":98,"column":1},"source":"src\\main.js","original":{"line":96,"column":0}}],"sources":{"src\\main.js":"import './css/main.css'\r\nimport io from './js/socket.io'\r\n\r\nlet loginStatus = false;\r\nlet oLogin = document.getElementById('login-box');\r\nlet oLoginInput = document.getElementById('login-input');\r\nlet oLoginBtn = document.getElementById('login-btn')\r\nlet nickName = '';\r\nlet oMessageInput = document.getElementById('message-input');\r\nlet oMessageBtn = document.getElementById('message-btn');\r\nlet oListBox = document.getElementById('list-box');\r\nlet oUsersLength = document.getElementById('users-length');\r\nlet oUserBox = document.getElementById('user-box');\r\nlet socket = io('ws://localhost:3000');\r\n\r\n//连接服务器\r\nsocket.on('connect',function(){\r\n    console.log('ok');\r\n})\r\n\r\n//服务器事件\r\nsocket.on('login',function(data){\r\n    if(data.status=='ok'){\r\n        loginStatus = true;\r\n        oLogin.style.display = 'none';\r\n    }else{\r\n        alert(data.text);\r\n    }\r\n})\r\n\r\nsocket.on('message',function(data){\r\n    oListBox.innerHTML += `<li>\r\n        <div class=\"name\">${data.name}</div>\r\n        <div class=\"message\">${data.text}</div>\r\n    </li>`;\r\n    oListBox.scrollTop = oListBox.scrollHeight;\r\n})\r\n\r\nsocket.on('sys',function(data){\r\n    oUsersLength.innerText = data.count;\r\n    oListBox.innerHTML += `<li class=\"sys\">\r\n        <div class=\"name\">系统通知</div>\r\n        <div class=\"message\">${data.text}</div>\r\n    </li>`;\r\n    let oUser = '';\r\n    data.users.forEach(el => {\r\n        oUser += `<li>${el}</li>`;\r\n    });\r\n    oUserBox.innerHTML = oUser;\r\n})\r\n\r\n//登录事件\r\nfunction userLogin(){\r\n    console.log('login')\r\n    let loginName = oLoginInput.value;\r\n    if(loginName === ''){\r\n        alert('请输入用户名');\r\n    }else if(loginName.length>20){\r\n        alert('用户名不能超过20个字符长度')\r\n    }else{\r\n        nickName = loginName;\r\n        socket.emit('login',{\r\n            name:nickName\r\n        })\r\n    }\r\n}\r\noLoginBtn.addEventListener('click',userLogin);\r\noLoginInput.addEventListener('keydown',function(e){\r\n    if(e.key === 'Enter'){\r\n        userLogin();\r\n    }\r\n})\r\n\r\n//发送消息\r\nfunction sendMessage(){\r\n    let oText = oMessageInput.value;\r\n    if(oText === ''){\r\n        alert('发送消息不能为空');\r\n        return ;\r\n    }else if(oText.length > 30){\r\n        alert('内容不能超过30字符长度');\r\n        return ;\r\n    }\r\n    socket.emit('message',{\r\n        name:nickName,\r\n        text:oText\r\n    })\r\n    oListBox.innerHTML += `<li class=\"my\">\r\n        <div class=\"name\">${nickName}</div>\r\n        <div class=\"message\">${oText}</div>\r\n    </li>`;\r\n    oMessageInput.value = '';\r\n    oListBox.scrollTop = oListBox.scrollHeight;\r\n}\r\noMessageBtn.addEventListener('click',sendMessage);\r\noMessageInput.addEventListener('keydown',function(e){\r\n    if(e.key === 'Enter'){\r\n        sendMessage();\r\n    }\r\n})\r\n"},"lineCount":null}},"hash":"31746566ecc43e651d54f84464c6abb9","cacheData":{"env":{}}}